<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The awake event &mdash; Phaser Editor 2D Help</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/icon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Adding User Components to a Game Object" href="user-components-instancing.html" />
    <link rel="prev" title="A base class for your components" href="user-components-super-class.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #343131" >
            <a href="../index.html" class="icon icon-home"> Phaser Editor 2D
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                v3.36.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first-steps/index.html">First steps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workbench/index.html">Workbench</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asset-pack-editor/index.html">Asset Pack Editor</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Scene Editor</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create-new-scene-file.html">Create a new Scene file</a></li>
<li class="toctree-l2"><a class="reference internal" href="add-object.html">Adding an object to the scene</a></li>
<li class="toctree-l2"><a class="reference internal" href="inspector-view.html">Inspector view</a></li>
<li class="toctree-l2"><a class="reference internal" href="game-objects.html">Game Object types</a></li>
<li class="toctree-l2"><a class="reference internal" href="scene-properties.html">Scene properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="arcade-physics.html">Arcade physics</a></li>
<li class="toctree-l2"><a class="reference internal" href="working-with-parent-objects.html">Working with parent objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="object-list.html">Object List</a></li>
<li class="toctree-l2"><a class="reference internal" href="display-list.html">Display List</a></li>
<li class="toctree-l2"><a class="reference internal" href="input.html">Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="prefabs.html">Prefabs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="user-components.html">User Components</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="user-components-create-file.html">Create a new User Components file</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-components-editor.html">User Components Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-components-compiler.html">The User Components compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-components-start-update-methods.html">Implementing behaviors with the Phaser events</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-components-super-class.html">A base class for your components</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">The awake event</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-components-instancing.html">Adding User Components to a Game Object</a></li>
<li class="toctree-l3"><a class="reference internal" href="user-components-in-prefab-object.html">Adding User Components to a Prefab</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="manipulation-tools.html">Manipulation tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="layout-tools.html">Layout tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="scene-compiler.html">The scene compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code-editor/index.html">Code Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../animations-editor/index.html">Animations Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../atlas-editor/index.html">Atlas Editor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/index.html">Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pricing/index.html">License and pricing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #343131" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Phaser Editor 2D</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Scene Editor</a> &raquo;</li>
          <li><a href="user-components.html">User Components</a> &raquo;</li>
      <li>The awake event</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-awake-event">
<h1>The awake event<a class="headerlink" href="#the-awake-event" title="Permalink to this headline"></a></h1>
<p>We propose using <a class="reference external" href="https://phaser.io">Phaser</a> events for implementing the User Components behaviors. However, the events provided in <a class="reference external" href="https://phaser.io">Phaser</a> are not enough. When you create a component, all properties are set with the default values. Then, you set the value of each property. However, maybe you want to perform a custom initialization routine after all properties are set.</p>
<p>Looking into the <a class="reference external" href="https://phaser.io">Phaser</a> events, you can do it in the first scene’s update. It means you can listen once for the <strong>UPDATE</strong> event and run the initialization routine. It may work in many cases. But maybe, you want to run this routine just after all properties are set, and before the game starts the update loop.</p>
<p>For this reason, the <a class="reference external" href="../scene-editor/scene-compiler.html">scene compiler</a> generates code for emitting a custom event, the <code class="docutils literal notranslate"><span class="pre">scene-awake</span></code> event, just after it generates the code that creates the objects in the scene, and all their properties are set:
.. code:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// code generated by the compiler:</span>

<span class="nx">editorCreate</span><span class="p">()</span> <span class="p">{</span>

    <span class="c1">// creates the game object</span>
    <span class="kd">const</span> <span class="nx">dino</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">image</span><span class="p">(</span><span class="mf">400</span><span class="p">,</span> <span class="mf">240</span><span class="p">,</span> <span class="s2">&quot;FufuSuperDino&quot;</span><span class="p">);</span>

    <span class="c1">// creates the PushOnClick component</span>
    <span class="kd">const</span> <span class="nx">dinoPushOnClick</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">PushOnClick</span><span class="p">(</span><span class="nx">dino</span><span class="p">);</span>

    <span class="c1">// sets the component&#39;s properties</span>
    <span class="nx">dinoPushOnClick</span><span class="p">.</span><span class="nx">pushDelay</span> <span class="o">=</span> <span class="mf">500</span><span class="p">;</span>

    <span class="c1">// emit the scene-awake event, after all objects are created</span>
    <span class="c1">// and all properties are set</span>
    <span class="nx">dino</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s2">&quot;scene-awake&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When you implement a component, you can register a listener on the <strong>scene-awake</strong> event:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nx">PushOnClick</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span><span class="nx">gameObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">...</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">gameObject</span> <span class="o">=</span> <span class="nx">gameObject</span><span class="p">;</span>

        <span class="nx">gameObject</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">once</span><span class="p">(</span><span class="s2">&quot;scene-awake&quot;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>

            <span class="c1">// I register a &quot;pointerdown&quot;</span>
            <span class="c1">// event for &quot;animating&quot; the game object</span>
            <span class="c1">// with a push effect</span>

            <span class="c1">// I set a pixel perfect handler</span>
            <span class="c1">// with certain alpha-tolerance</span>
            <span class="kd">const</span> <span class="nx">handler</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">input</span>
                <span class="p">.</span><span class="nx">makePixelPerfect</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">alphaTolerance</span><span class="p">);</span>


            <span class="k">this</span><span class="p">.</span><span class="nx">gameObject</span><span class="p">.</span><span class="nx">setInteractive</span><span class="p">(</span><span class="nx">handler</span><span class="p">)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;pointerdown&quot;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
                    <span class="c1">// animate the object with the push effect</span>
                    <span class="k">this</span><span class="p">.</span><span class="nx">gameObject</span><span class="p">.</span><span class="nx">scene</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">tween</span><span class="p">(...);</span>
                <span class="p">});</span>
        <span class="p">});</span>
    <span class="p">}</span>

    <span class="cm">/** @type {number} **/</span>
    <span class="nx">alphaTolerance</span> <span class="o">=</span> <span class="mf">100</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the section <a class="reference external" href="./user-components-super-class.html">A base class for your components</a>), we explain how you can use a common super-class for all the components. It simplifies the listening of <a class="reference external" href="https://phaser.io">Phaser</a> events, and it also includes the <strong>scene-awake</strong> event. So you can rewrite the previous <strong>PushOnClick</strong> component in this way:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">class</span> <span class="nx">PushOnClick</span> <span class="k">extends</span> <span class="nx">UserComponent</span> <span class="p">{</span>

    <span class="kr">constructor</span><span class="p">(</span><span class="nx">gameObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">gameObject</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">awake</span><span class="p">()</span> <span class="p">{</span>

        <span class="c1">// Instead of registering a scene-awake event listener</span>
        <span class="c1">// you can override this method.</span>

        <span class="p">...</span>

        <span class="k">this</span><span class="p">.</span><span class="nx">gameObject</span><span class="p">.</span><span class="nx">setInteractive</span><span class="p">(...)</span>
                <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;pointerdown&quot;</span><span class="p">,</span> <span class="p">...);</span>
        <span class="p">...</span>
    <span class="p">}</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">scene-awake</span></code> event is emitted in the <code class="docutils literal notranslate"><span class="pre">editorCreate()</span></code> method of a scene. So, if you create a new component and this component listens to the <code class="docutils literal notranslate"><span class="pre">scene-awake</span></code> event, then you should emit that event manually:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">comp</span> <span class="o">=</span> <span class="ow">new</span> <span class="nx">PushOnClick</span><span class="p">(</span><span class="nx">someSprite</span><span class="p">);</span>
<span class="nx">comp</span><span class="p">.</span><span class="nx">alphaTolerance</span> <span class="o">=</span> <span class="mf">50</span><span class="p">;</span>
<span class="c1">// emit the awake event so the component can be notified</span>
<span class="k">this</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s2">&quot;scene-awake&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>Emitting the <code class="docutils literal notranslate"><span class="pre">scene-awake</span></code> event later in the game is safe because components and <a class="reference external" href="../scene-editor/prefabs.html">prefabs</a> handle this event only once in their lifetime.</p>
<p>The <a class="reference external" href="../scene-editor/prefabs.html">prefabs</a> also listens to the <code class="docutils literal notranslate"><span class="pre">scene-awake</span></code> event. <a class="reference external" href="./prefab-user-properties-initializing.html#the-scene-awake-event">Learn more about it</a>.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user-components-super-class.html" class="btn btn-neutral float-left" title="A base class for your components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="user-components-instancing.html" class="btn btn-neutral float-right" title="Adding User Components to a Game Object" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2022, Arian Fornaris.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-67206336-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-67206336-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>